<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script src="jquery/jquery-2.1.0.js" type="text/javascript"></script>
<script type="text/javascript"> 
$(function(){
	var wait = function(dtd){
		var dtd = $.Deferred(); //在函数内部，新建一个deferred对象
		var tasks = function(){
			alert("执行完毕！");
			dtd.resolve(); // 改变deferred对象的执行状态
		};
		setTimeout(tasks,5000);
		return dtd.promise(); // 返回promise对象
	};
	$.when(wait())
	.done(function(){ alert("成功了！"); })
	.fail(function(){ alert("出错啦！"); });


})
</script>
<title>test</title>
</head>
<body>
</body>
</html>